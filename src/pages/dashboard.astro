---
import AstroIcon from "../icons/AstroIcon.astro";
import { supabase } from "../lib/supabase";
import Base from "../layout/Base.astro";
const { email } = Astro.locals;

const { data, error } = await supabase.auth.getSession()

const d = JSON.stringify(data, null, 2);
const e = JSON.stringify(error, null, 2);
---

<Base title="Dashboard">
  <p
    class="max-w-prose text-xl text-indigo-600 dark:text-indigo-400 font-semibold"
  >
    {email}
  </p>
  Hello
 <pre>
    {d}
 </pre>
 <pre>
    {e}
 </pre>
  <p class="max-w-prose text-lg dark:text-zinc-100">
    This is a protected page. You can only see this if you are logged in.
  </p>
  <a
    href="/api/auth/signout"
    class="bg-zinc-900 dark:bg-zinc-100 text-zinc-100 dark:text-zinc-900 px-3 py-1 rounded-md"
    >Sign out</a
  >
</Base>
